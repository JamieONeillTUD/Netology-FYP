<!--
Student Number: C22320301
Student Name: Jamie O’Neill
Course Code: TU857/4
Date: 10/11/2025

HTML
---------------------------------
dashboard.html – Netology Dashboard (Sidebar Layout)

Update requested:
- Top nav bar (desktop + mobile):
  - Center: Netology logo + word
    - If signed in → reload dashboard.html
    - If NOT signed in → go to index.html
  - Right: user name + small dropdown caret (Khan-style)
    - Dropdown items: My account, Help, Logout
- Removed the old "Account" button in top bar
- Kept sidebar layout + mobile offcanvas menu
- JS hooks added:
  - #brandLink (center brand)
  - #userDropdownName (name)
  - #logoutBtnTop (logout in dropdown)
  - mobile equivalents

Backend:
- GET /user-info?email=
- GET /user-courses?email=
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Netology – Dashboard</title>

  <!-- REQUIRED (C3): Render API base -->
  <script>
    window.API_BASE = "https://netology-fyp.onrender.com";
  </script>

  <!-- Bootstrap + Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <!-- Netology CSS -->
  <link rel="stylesheet" href="css/style.css">
</head>

<body class="net-bg net-landing">

  <!-- =========================================================
       TOP NAV (Desktop) — centered brand + user dropdown
  ========================================================== -->
  <header class="net-topbar net-landing-topbar net-navglass sticky-top d-none d-lg-block" role="banner">
    <div class="container position-relative py-3">

      <!-- Center brand -->
      <div class="d-flex justify-content-center">
        <a href="dashboard.html"
           id="brandLink"
           class="d-inline-flex align-items-center gap-3 text-decoration-none"
           aria-label="Netology home">
          <div class="net-logo" aria-hidden="true"></div>
          <div class="net-brand">Netology</div>
        </a>
      </div>

      <!-- Right user dropdown -->
      <div class="position-absolute top-50 end-0 translate-middle-y">
        <div class="dropdown">
          <button class="btn btn-outline-light btn-sm d-inline-flex align-items-center"
                  id="userDropdownBtn"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                  aria-label="Open user menu">
            <span class="me-2 fw-semibold" id="userDropdownName">Student</span>
            <i class="bi bi-caret-down-fill" aria-hidden="true"></i>
          </button>

          <ul class="dropdown-menu dropdown-menu-end shadow-sm">
            <li>
              <a class="dropdown-item d-flex align-items-center" href="account.html" aria-label="Open account page">
                <i class="bi bi-person-circle me-2" aria-hidden="true"></i>
                My account
              </a>
            </li>
            <li>
              <a class="dropdown-item d-flex align-items-center" href="help.html" aria-label="Open help page">
                <i class="bi bi-question-circle me-2" aria-hidden="true"></i>
                Help
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <button class="dropdown-item d-flex align-items-center text-danger" id="logoutBtnTop" aria-label="Logout">
                <i class="bi bi-box-arrow-right me-2" aria-hidden="true"></i>
                Logout
              </button>
            </li>
          </ul>
        </div>
      </div>

    </div>
  </header>

  <!-- =========================================================
       TOP NAV (Mobile) — centered brand + Menu + user dropdown
       (Menu opens offcanvas; brand uses same signed-in logic)
  ========================================================== -->
  <header class="net-topbar net-landing-topbar net-navglass sticky-top d-lg-none" role="banner">
    <div class="container position-relative py-3">

      <!-- Center brand -->
      <div class="d-flex justify-content-center">
        <a href="dashboard.html"
           id="brandLink_m"
           class="d-inline-flex align-items-center gap-3 text-decoration-none"
           aria-label="Netology home">
          <div class="net-logo" aria-hidden="true"></div>
          <div class="net-brand">Netology</div>
        </a>
      </div>

      <!-- Left: Menu button -->
      <div class="position-absolute top-50 start-0 translate-middle-y">
        <button class="btn btn-outline-light btn-sm d-inline-flex align-items-center"
                type="button"
                data-bs-toggle="offcanvas"
                data-bs-target="#sidebarMobile"
                aria-controls="sidebarMobile"
                aria-label="Open menu">
          <i class="bi bi-layout-sidebar-inset me-2" aria-hidden="true"></i>
          Menu
        </button>
      </div>

      <!-- Right: user dropdown -->
      <div class="position-absolute top-50 end-0 translate-middle-y">
        <div class="dropdown">
          <button class="btn btn-outline-light btn-sm d-inline-flex align-items-center"
                  id="userDropdownBtn_m"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                  aria-label="Open user menu">
            <span class="me-2 fw-semibold" id="userDropdownName_m">Student</span>
            <i class="bi bi-caret-down-fill" aria-hidden="true"></i>
          </button>

          <ul class="dropdown-menu dropdown-menu-end shadow-sm">
            <li>
              <a class="dropdown-item d-flex align-items-center" href="account.html">
                <i class="bi bi-person-circle me-2"></i>My account
              </a>
            </li>
            <li>
              <a class="dropdown-item d-flex align-items-center" href="help.html">
                <i class="bi bi-question-circle me-2"></i>Help
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <button class="dropdown-item d-flex align-items-center text-danger" id="logoutBtnTop_m">
                <i class="bi bi-box-arrow-right me-2"></i>Logout
              </button>
            </li>
          </ul>
        </div>
      </div>

    </div>
  </header>

  <div class="container-fluid">
    <div class="row g-0">

      <!-- =========================================================
           SIDEBAR (DESKTOP)
      ========================================================== -->
      <aside class="col-lg-3 col-xl-2 d-none d-lg-block border-end" aria-label="Sidebar navigation">
        <div class="p-3 p-xl-4 net-sidewrap">

          <!-- (Optional) keep small label here, but top brand is now the main one -->
          <div class="mb-3">
            <div class="fw-bold fs-6 net-gradient-text">Dashboard</div>
            <div class="small text-muted">Your learning hub</div>
          </div>

          <!-- User box -->
          <div class="net-userbox mb-3">
            <div class="d-flex align-items-center justify-content-between gap-2">
              <div>
                <div class="fw-semibold" id="sideName">Student</div>
                <div class="small text-muted" id="sideEmail">email@example.com</div>
              </div>
              <span class="badge text-bg-light border" id="rankBadge">Novice</span>
            </div>

            <div class="row g-2 mt-3">
              <div class="col-6">
                <div class="net-userchip">
                  <div class="text-muted small">Level</div>
                  <div class="fw-bold" id="levelText">1</div>
                </div>
              </div>
              <div class="col-6">
                <div class="net-userchip">
                  <div class="text-muted small">Total XP</div>
                  <div class="fw-bold" id="xpText">0</div>
                </div>
              </div>
            </div>

            <div class="mt-3">
              <div class="d-flex justify-content-between small text-muted mb-1">
                <span>XP Progress</span>
                <span id="xpNextText">0 / 100</span>
              </div>
              <div class="progress" style="height: 10px;">
                <div class="progress-bar net-progress" id="xpBar" style="width:0%"></div>
              </div>
            </div>

            <div class="mt-3 small text-muted" id="unlockText">
              Next tier unlocks soon.
            </div>

            <div class="d-grid gap-2 mt-3">
              <a href="account.html" class="btn btn-outline-secondary btn-sm d-inline-flex align-items-center" aria-label="Open settings">
                <i class="bi bi-gear me-2" aria-hidden="true"></i>
                Settings
              </a>
              <button class="btn btn-outline-danger btn-sm d-inline-flex align-items-center" id="logoutBtn" aria-label="Logout">
                <i class="bi bi-box-arrow-right me-2" aria-hidden="true"></i>
                Logout
              </button>
            </div>
          </div>

          <!-- Nav -->
          <nav class="d-grid gap-2">
            <a class="btn btn-outline-secondary btn-sm text-start net-navbtn is-active" href="dashboard.html" aria-label="My stuff">
              <i class="bi bi-grid-1x2 me-2" aria-hidden="true"></i>
              My stuff
            </a>
            <a class="btn btn-outline-secondary btn-sm text-start net-navbtn" href="courses.html" aria-label="Courses">
              <i class="bi bi-journal-bookmark me-2" aria-hidden="true"></i>
              Courses
            </a>
            <a class="btn btn-outline-secondary btn-sm text-start net-navbtn" href="#progress" aria-label="Progress section">
              <i class="bi bi-graph-up me-2" aria-hidden="true"></i>
              Progress
            </a>
            <a class="btn btn-outline-secondary btn-sm text-start net-navbtn" href="account.html" aria-label="My account">
              <i class="bi bi-person-circle me-2" aria-hidden="true"></i>
              My account
            </a>
            <a class="btn btn-outline-secondary btn-sm text-start net-navbtn" href="sandbox.html" aria-label="Sandbox">
              <i class="bi bi-diagram-3 me-2" aria-hidden="true"></i>
              Sandbox
            </a>
          </nav>

          <div class="small text-muted mt-3">
            Tip: practise in sandbox after each quiz to lock it in.
          </div>
        </div>
      </aside>

      <!-- =========================================================
           MAIN
      ========================================================== -->
      <main class="col-12 col-lg-9 col-xl-10">
        <div class="container py-4">

          <!-- Hero -->
          <section class="net-card net-pop p-4 p-lg-5 mb-3">
            <div class="row g-4 align-items-center">
              <div class="col-lg-8">
                <div class="net-pill mb-3">
                  <span class="net-dot" aria-hidden="true"></span>
                  <span class="small fw-semibold">Dashboard</span>
                  <span class="small text-muted">Continue learning</span>
                </div>

                <div class="small text-muted">Welcome back</div>
                <h1 class="display-6 fw-bold mb-2">
                  <span id="welcomeName" class="net-gradient-text">Student</span>
                </h1>

                <p class="text-muted mb-0">
                  Track your progress, unlock content, and build network topologies in the sandbox.
                </p>

                <div class="d-flex flex-wrap gap-2 mt-3">
                  <a href="courses.html" class="btn btn-teal btn-sm d-inline-flex align-items-center" aria-label="Browse courses">
                    <i class="bi bi-journal-bookmark me-2" aria-hidden="true"></i>
                    Browse Courses
                  </a>
                  <a href="sandbox.html" class="btn btn-outline-secondary btn-sm d-inline-flex align-items-center" aria-label="Open sandbox">
                    <i class="bi bi-diagram-3 me-2" aria-hidden="true"></i>
                    Open Sandbox
                  </a>
                </div>
              </div>

              <div class="col-lg-4 d-none d-lg-block">
                <div class="net-mini-media p-4">
                  <div class="fw-semibold mb-1">Quick view</div>
                  <div class="small text-muted">Your learning snapshot</div>
                  <div class="mt-3 net-mini-row">
                    <div class="net-mini-ico" aria-hidden="true"><i class="bi bi-lightning-charge-fill"></i></div>
                    <div>
                      <div class="fw-semibold">XP keeps you unlocking</div>
                      <div class="small text-muted">Complete quizzes and lessons</div>
                    </div>
                  </div>
                  <div class="mt-2 net-mini-row">
                    <div class="net-mini-ico" aria-hidden="true"><i class="bi bi-award"></i></div>
                    <div>
                      <div class="fw-semibold">Earn badges</div>
                      <div class="small text-muted">Build a streak over time</div>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </section>

          <!-- Stats grid -->
          <section class="mb-3" id="progress">
            <div class="row g-3">
              <div class="col-12 col-sm-6 col-xl-3">
                <div class="net-stat-card net-pop h-100">
                  <div class="d-flex align-items-start justify-content-between">
                    <div>
                      <div class="text-muted small">Level</div>
                      <div class="fw-bold fs-4" id="statLevel">1</div>
                    </div>
                    <div class="net-statico" aria-hidden="true"><i class="bi bi-bullseye"></i></div>
                  </div>
                  <div class="small text-muted mt-2" id="statRank">Novice rank</div>
                </div>
              </div>

              <div class="col-12 col-sm-6 col-xl-3">
                <div class="net-stat-card net-pop h-100">
                  <div class="d-flex align-items-start justify-content-between">
                    <div>
                      <div class="text-muted small">Total XP</div>
                      <div class="fw-bold fs-4" id="statXp">0</div>
                    </div>
                    <div class="net-statico" aria-hidden="true"><i class="bi bi-lightning-charge-fill"></i></div>
                  </div>
                  <div class="small text-muted mt-2">Earn XP from lessons, quizzes, and challenges.</div>
                </div>
              </div>

              <div class="col-12 col-sm-6 col-xl-3">
                <div class="net-stat-card net-pop h-100">
                  <div class="d-flex align-items-start justify-content-between">
                    <div>
                      <div class="text-muted small">In progress</div>
                      <div class="fw-bold fs-4" id="statInProgress">0</div>
                    </div>
                    <div class="net-statico" aria-hidden="true"><i class="bi bi-journal-text"></i></div>
                  </div>
                  <div class="small text-muted mt-2">Pick up where you left off.</div>
                </div>
              </div>

              <div class="col-12 col-sm-6 col-xl-3">
                <div class="net-stat-card net-pop h-100">
                  <div class="d-flex align-items-start justify-content-between">
                    <div>
                      <div class="text-muted small">Completed</div>
                      <div class="fw-bold fs-4" id="statCompleted">0</div>
                    </div>
                    <div class="net-statico" aria-hidden="true"><i class="bi bi-check2-circle"></i></div>
                  </div>
                  <div class="small text-muted mt-2">Review completed courses anytime.</div>
                </div>
              </div>
            </div>
          </section>

          <!-- Continue + Courses -->
          <div class="row g-3">

            <!-- Continue -->
            <div class="col-lg-4">
              <section class="net-card net-pop p-4 h-100">
                <div class="d-flex align-items-center justify-content-between mb-2">
                  <div class="fw-semibold">Continue learning</div>
                  <a href="courses.html" class="small link-teal" aria-label="Browse all courses">Browse</a>
                </div>

                <div class="text-muted small mb-3">
                  Your next lesson is one click away.
                </div>

                <div id="continueBox" class="net-continue-skel" aria-live="polite">
                  <div class="net-skel net-w-80 mb-2"></div>
                  <div class="net-skel net-w-60 mb-3"></div>
                  <div class="net-skel net-w-40"></div>
                </div>

                <div class="d-grid gap-2 mt-3">
                  <a href="sandbox.html" class="btn btn-outline-secondary btn-sm d-inline-flex align-items-center" aria-label="Practise in sandbox">
                    <i class="bi bi-diagram-3 me-2" aria-hidden="true"></i>
                    Practise in sandbox
                  </a>
                </div>
              </section>
            </div>

            <!-- Courses -->
            <div class="col-lg-8">
              <section class="net-card net-pop p-4">
                <div class="d-flex flex-wrap align-items-center justify-content-between gap-2 mb-3">
                  <div>
                    <div class="fw-semibold">Your courses</div>
                    <div class="small text-muted">Search and filter to find your next course.</div>
                  </div>

                  <div class="d-flex flex-wrap gap-2 align-items-center">
                    <div class="net-search">
                      <i class="bi bi-search" aria-hidden="true"></i>
                      <input id="courseSearch"
                             class="form-control form-control-sm"
                             type="search"
                             placeholder="Search courses…"
                             aria-label="Search courses">
                    </div>

                    <div class="btn-group" role="group" aria-label="Filter courses by difficulty">
                      <button type="button" class="btn btn-sm btn-outline-secondary net-chip is-active" data-diff="all">All</button>
                      <button type="button" class="btn btn-sm btn-outline-secondary net-chip" data-diff="novice">Novice</button>
                      <button type="button" class="btn btn-sm btn-outline-secondary net-chip" data-diff="intermediate">Intermediate</button>
                      <button type="button" class="btn btn-sm btn-outline-secondary net-chip" data-diff="advanced">Advanced</button>
                    </div>
                  </div>
                </div>

                <div id="coursesGrid" class="row g-3">
                  <!-- Cards injected -->
                </div>

                <div class="small text-muted mt-3" id="lockNote">
                  Locked courses appear grey until you reach the required level.
                </div>
              </section>
            </div>

          </div>

          <!-- CTA -->
          <section class="mt-3">
            <div class="net-cta net-pop p-4 p-lg-5 text-white">
              <div class="d-flex flex-column flex-lg-row justify-content-between align-items-start align-items-lg-center gap-3">
                <div>
                  <h2 class="h4 fw-bold mb-1">Ready to practise?</h2>
                  <p class="mb-0 text-white-75">Open the sandbox and build real network topologies.</p>
                </div>
                <a href="sandbox.html" class="btn btn-light fw-semibold d-inline-flex align-items-center" aria-label="Open sandbox">
                  <i class="bi bi-diagram-3 me-2" aria-hidden="true"></i>
                  Open Sandbox
                </a>
              </div>
            </div>
          </section>

        </div>

        <footer class="text-center border-top py-4 bg-white" role="contentinfo">
          <p class="small text-muted mb-0">2025 – Jamie O’Neill – TU857/4</p>
        </footer>
      </main>

    </div>
  </div>

  <!-- =========================================================
       MOBILE SIDEBAR (Bootstrap Offcanvas)
  ========================================================== -->
  <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarMobile" aria-label="Mobile menu">
    <div class="offcanvas-header">
      <div class="d-flex align-items-center gap-2">
        <div class="net-logo" aria-hidden="true"></div>
        <div class="fw-bold">Netology</div>
      </div>
      <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-dismiss="offcanvas" aria-label="Close menu">
        <i class="bi bi-x-lg" aria-hidden="true"></i>
      </button>
    </div>

    <div class="offcanvas-body">
      <div class="net-userbox mb-3">
        <div class="fw-semibold" id="sideName_m">Student</div>
        <div class="small text-muted" id="sideEmail_m">email@example.com</div>
        <div class="small text-muted mt-2" id="unlockText_m">Next tier unlocks soon.</div>

        <div class="d-grid gap-2 mt-3">
          <a href="account.html" class="btn btn-outline-secondary btn-sm d-inline-flex align-items-center">
            <i class="bi bi-gear me-2" aria-hidden="true"></i>
            Settings
          </a>
          <button class="btn btn-outline-danger btn-sm d-inline-flex align-items-center" id="logoutBtn_m">
            <i class="bi bi-box-arrow-right me-2" aria-hidden="true"></i>
            Logout
          </button>
        </div>
      </div>

      <div class="d-grid gap-2">
        <a class="btn btn-outline-secondary btn-sm text-start" href="dashboard.html">
          <i class="bi bi-grid-1x2 me-2"></i>My stuff
        </a>
        <a class="btn btn-outline-secondary btn-sm text-start" href="courses.html">
          <i class="bi bi-journal-bookmark me-2"></i>Courses
        </a>
        <a class="btn btn-outline-secondary btn-sm text-start" href="#progress" data-bs-dismiss="offcanvas">
          <i class="bi bi-graph-up me-2"></i>Progress
        </a>
        <a class="btn btn-outline-secondary btn-sm text-start" href="account.html">
          <i class="bi bi-person-circle me-2"></i>My account
        </a>
        <a class="btn btn-outline-secondary btn-sm text-start" href="sandbox.html">
          <i class="bi bi-diagram-3 me-2"></i>Sandbox
        </a>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/config.js"></script>
  <script src="js/course_content.js"></script>
  <script src="js/dashboard.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
